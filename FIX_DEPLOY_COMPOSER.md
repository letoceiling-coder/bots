# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã deploy –¥–ª—è Composer

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–º–∞–Ω–¥–∞ deploy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π PHP 5.6.40 –≤–º–µ—Å—Ç–æ php8.2 –¥–ª—è Composer.

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é

```bash
# –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull origin main

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º PHP
php8.2 /home/d/dsc23ytp/.local/bin/composer install --no-dev --optimize-autoloader

# –ó–∞–≥—Ä—É–∑–∏—Ç—å nvm –∏ —Å–æ–±—Ä–∞—Ç—å
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
npm run build

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
php8.2 artisan migrate --force
php8.2 artisan config:clear && php8.2 artisan cache:clear
php8.2 artisan config:cache && php8.2 artisan route:cache
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É deploy

–Ø —É–∂–µ –æ–±–Ω–æ–≤–∏–ª –∫–æ–º–∞–Ω–¥—É deploy. –ù—É–∂–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
git add app/Console/Commands/Deploy.php
git commit -m "Fix deploy command: use php8.2 and nvm"
git push origin main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git pull origin main
php8.2 artisan deploy --force
```

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ deploy

–ö–æ–º–∞–Ω–¥–∞ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç php8.2
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ composer
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç nvm –¥–ª—è npm –∫–æ–º–∞–Ω–¥
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Node.js 20 —á–µ—Ä–µ–∑ nvm

## üîÑ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ö–æ–º–∞–Ω–¥–∞ `php8.2 artisan deploy --force` –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

